
{
   "name":"SEALMAN 1.0",
   "generator":"twig",
   "content":"{\r\n    \"azure\": {\r\n        \"config\": {\r\n            \"hostname\": \"eg-{{serialNumber}}\",\r\n            \"provisioning\": {\r\n                \"source\": \"manual\",\r\n                \"connection_string\": \"{{iothub_device_connection_string}}\",\r\n                \"dynamic_reprovisioning\": false\r\n            }\r\n            {% if edge_agent_image is defined %}\r\n            ,\r\n            \"agent\": {\r\n                \"name\": \"edgeAgent\",\r\n                \"type\": \"docker\",\r\n                \"config\": {\r\n                    \"image\": \"{{edge_agent_image}}\",\r\n                    \"auth\": {\r\n                        \"serveraddress\": \"{{edge_agent_serveraddress}}\",\r\n                        \"username\": \"{{edge_agent_username}}\",\r\n                        \"password\": \"{{edge_agent_password}}\"\r\n                    }\r\n                }\r\n            }\r\n            {% endif %}\r\n        },\r\n        \"validated\": \"1\"\r\n    },\r\n    \"config_format_version\": \"1.0\",\r\n    \"serial\": {\r\n        \"serial0\": {\r\n            \"console_output\": {\r\n                \"at_startup\": false,\r\n                \"currently\": false\r\n            }\r\n        }\r\n    },\r\n    \"logrotate\": {\r\n        \"rotate\": 14,\r\n        \"period\": \"daily\",\r\n        \"maxsize\": 50\r\n    },\r\n    \"sshconfig\": {\r\n        \"password_auth\": \"on\",\r\n        \"key_auth\": \"on\",\r\n        \"publickeys\": {\r\n            \"admin\": []\r\n         },\r\n        \"unreadable_users\": {}\r\n    },\r\n    \"proxy_servers\": {},\r\n    \"motd\": \"\",\r\n    \"date_time\": {\r\n        \"ntp_server\": \"\",\r\n        \"fallback_servers\": \"time1.google.com time2.google.com time3.google.com time4.google.com\",\r\n        \"interval_minimum\": 32,\r\n        \"interval_maximum\": 2048,\r\n        \"ntp_enabled\": true,\r\n        \"timezone\": \"Universal\"\r\n    },\r\n    \"webgui\": {\r\n        \"is_enabled\": true\r\n    },\r\n    \"network\": {\r\n        {% if cellular is defined %}\r\n        \"cellular1\": {\r\n            \"apn\": {% if cellular_apn is defined %}\"{{ cellular_apn }}\"{% else %}\"m2m.tele2.com\"{% endif %},\r\n            \"pin\": {% if cellular_pin is defined %}\"{{ cellular_pin }}\"{% else %}\"\"{% endif %},\r\n            \"access_number\": {% if cellular_access_number is defined %}\"{{ cellular_access_number }}\"{% else %}\"*99***1#\"{% endif %},\r\n            \"auth_method\": {% if cellular_auth_method is defined %}\"{{ cellular_auth_method }}\"{% else %}\"\" {% endif %},\r\n            \"username\": {% if cellular_user is defined %}\"{{ cellular_user }}\"{% else %}\"\"{% endif %},\r\n            \"password\": {% if cellular_pw is defined %}\"{{ cellular_pw }}\"{% else %}\"\"{% endif %},\r\n            \"state\": {% if cellular_state is defined %}\"{{ cellular_state }}\"{% else %}\"on\"{% endif %}\r\n        },\r\n        {% else %}{% endif %}\r\n        \"lan1\": {\r\n            \"dhcp\": false,\r\n            \"ip\": [\r\n                \"192.168.2.1\"\r\n            ],\r\n            \"subnet\": [\r\n                \"24\"\r\n            ],\r\n            \"gateway\": null,\r\n            \"dns\": null,\r\n            \"current_ip\": \"192.168.2.1\",\r\n            \"current_subnet\": \"24\",\r\n            \"current_gateway\": null,\r\n            \"current_dns\": null\r\n        },\r\n        \"lan3\": {\r\n            \"dhcp\": {% if ip_lan_3 is defined %}false{% else %}true{% endif %},\r\n            \"ip\": [\r\n                \"{% if ip_lan_3 is defined %}{{ ip_lan_3 }}{% else %}{% endif %}\"\r\n            ],\r\n            \"subnet\": [\r\n                \"{% if subnet_lan_3 is defined %}{{ subnet_lan_3 }}{% else %}{% endif %}\"\r\n            ],\r\n            \"gateway\": {% if gw_lan_3 is defined %}\"{{ gw_lan_3 }}\"{% else %}null{% endif %},\r\n            \"dns\": {% if dns_lan_3 is defined %}\"{{ dns_lan_3 }}\"{% else %}null{% endif %}\r\n            },\r\n        \"lan2\": {\r\n            \"dhcp\": {% if ip_lan_2 is defined %}false{% else %}true{% endif %},\r\n            \"ip\": [\r\n                \"{% if ip_lan_2 is defined %}{{ ip_lan_2 }}{% else %}{% endif %}\"\r\n            ],\r\n            \"subnet\": [\r\n                \"{% if subnet_lan_2 is defined %}{{ subnet_lan_2 }}{% else %}{% endif %}\"\r\n            ],\r\n            \"gateway\": {% if gw_lan_2 is defined %}\"{{ gw_lan_2 }}\"{% else %}null{% endif %},\r\n            \"dns\": {% if dns_lan_2 is defined %}\"{{ dns_lan_2 }}\"{% else %}null{% endif %}\r\n            }\r\n    },\r\n    \"vlans\": {\r\n        \"lan2\": {\r\n            {% if nat_enabled is defined %}\r\n            {% if nat_machine_1_lan2 is defined and nat_machine_1 is defined %}\r\n            \"lan2_1\": {\r\n                \"ip\": \"{{ nat_machine_1_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n            {% if nat_machine_2_lan2 is defined and nat_machine_2 is defined  %}\r\n            ,\r\n            \"lan2_2\": {\r\n                \"ip\": \"{{ nat_machine_2_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n            {% if nat_machine_3_lan2 is defined and nat_machine_3 is defined %}\r\n            ,\r\n            \"lan2_3\": {\r\n                \"ip\": \"{{ nat_machine_3_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_4_lan2 is defined and nat_machine_4 is defined %}\r\n            ,\r\n            \"lan2_4\": {\r\n                \"ip\": \"{{ nat_machine_4_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_5_lan2 is defined and nat_machine_5 is defined %}\r\n            ,\r\n            \"lan2_5\": {\r\n                \"ip\": \"{{ nat_machine_5_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_6_lan2 is defined and nat_machine_6 is defined %}\r\n            ,\r\n            \"lan2_6\": {\r\n                \"ip\": \"{{ nat_machine_6_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_7_lan2 is defined and nat_machine_7 is defined %}\r\n            ,\r\n            \"lan2_7\": {\r\n                \"ip\": \"{{ nat_machine_7_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_8_lan2 is defined and nat_machine_8 is defined %}\r\n            ,\r\n            \"lan2_8\": {\r\n                \"ip\": \"{{ nat_machine_8_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_9_lan2 is defined and nat_machine_9 is defined %}\r\n            ,\r\n            \"lan2_9\": {\r\n                \"ip\": \"{{ nat_machine_9_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n\t\t\t{% if nat_machine_10_lan2 is defined and nat_machine_10 is defined %}\r\n            ,\r\n            \"lan2_10\": {\r\n                \"ip\": \"{{ nat_machine_10_lan2 }}\",\r\n                \"subnet\": 32,\r\n                \"gateway\": \"\"\r\n            }\r\n            {% else %}{% endif %}\r\n            {% else %}{% endif %}\r\n        },\r\n        \"lan3\": {},\r\n        \"lan1\": {}\r\n    },\r\n    \"static_routing\": {\r\n        \"enabled\": false,\r\n        \"selected\": \"disabled\",\r\n        \"saved\": {\r\n            \"disabled\": {}\r\n        },\r\n        \"edited\": {}\r\n    },\r\n    \"firewall\": {\r\n        \"enabled\": true,\r\n        \"selected\": \"gea_fht_fw_preset\",\r\n        \"edited\": {},\r\n        \"saved\": {\r\n            \"gea_fht_fw_preset\": {\r\n                \"notes\": \"default FHT preset\",\r\n                \"ip\": {\r\n                    \"nat\": {\r\n                        \"prerouting\": {\r\n                            {#- -----Setting 1:1 NAT----- -#}\r\n                            {% if nat_enabled is defined %}\r\n\r\n                            \"mgmtd\": {\r\n                                {% if nat_machine_1 is defined %}\r\n                                \"1100_{{nat_machine_1}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_1_lan2}} dnat to {{nat_machine_1_lan3}}\"\r\n                                }\r\n                                {% endif %}\r\n                                {% if nat_machine_2 is defined %}\r\n                                ,\r\n                                \"1200_{{nat_machine_2}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_2_lan2}} dnat to {{nat_machine_2_lan3}}\"\r\n                                }\r\n                                {% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_3 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1300_{{nat_machine_3}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_3_lan2}} dnat to {{nat_machine_3_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_4 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1400_{{nat_machine_4}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_4_lan2}} dnat to {{nat_machine_4_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_5 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1500_{{nat_machine_5}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_5_lan2}} dnat to {{nat_machine_5_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_6 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1600_{{nat_machine_6}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_6_lan2}} dnat to {{nat_machine_6_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_7 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1700_{{nat_machine_7}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_7_lan2}} dnat to {{nat_machine_7_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_8 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1800_{{nat_machine_8}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_8_lan2}} dnat to {{nat_machine_8_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_9 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"1900_{{nat_machine_9}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_9_lan2}} dnat to {{nat_machine_9_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t{% if nat_machine_10 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2000_{{nat_machine_10}}\": {\r\n                                    \"contents\": \"ip daddr {{nat_machine_10_lan2}} dnat to {{nat_machine_10_lan3}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n                            },\r\n\r\n                            {% endif %}\r\n\r\n                            \"policy\": \"accept\"\r\n                        },\r\n                        \"postrouting\": {\r\n                            \"mgmtd\": {\r\n                                \"1000_masquerade_cellular1\": {\r\n                                    \"contents\": \"oifname cellular1 masquerade\",\r\n                                    \"notes\": \"We treat lan2 (which by default receives address from DHCP) and cellular1 as WAN\\ninterfaces, hence be default we masqurade other networks (lan1 and internal\\ndocker networks) behind our address visible on lan2 and cellular1.\\n\\nNote that if you have both lan2 and cellular interfaces active you may want to\\nremove one of the masquerade rules, or add a rule preventing routing between\\nlan2 and cellular1 which you can do with commands:\\nfw modify forward add block_wan_to_wan_1 -i lan2 -o cellular1 -v drop\\nfw modify forward add block_wan_to_wan_2 -i cellular1 -o lan2 -v drop\\n(assuming you have exactly one preset in being edited state)\"\r\n                                },\r\n                                \"1100_masquerade_lan2\": {\r\n                                    \"contents\": \"oifname lan2 masquerade\"\r\n                                },\r\n                                \"1200_masquerade_lan3\": {\r\n                                    \"contents\": \"oifname lan3 masquerade\"\r\n                                }\r\n                                {#- -----Setting 1:1 NAT----- -#}\r\n                                {% if nat_enabled is defined %}\r\n\r\n                                {% if nat_machine_1 is defined %}\r\n                                ,\r\n                                \"2100_{{nat_machine_1}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_1_lan3}} snat to {{nat_machine_1_lan2}}\"\r\n                                }\r\n                                {% endif %}\r\n\r\n                                {% if nat_machine_2 is defined %}\r\n                                ,\r\n                                \"2200_{{nat_machine_2}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_2_lan3}} snat to {{nat_machine_2_lan2}}\"\r\n                                }\r\n                                {% endif %}\r\n\r\n                                {% if nat_machine_3 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2300_{{nat_machine_3}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_3_lan3}} snat to {{nat_machine_3_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_4 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2400_{{nat_machine_4}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_4_lan3}} snat to {{nat_machine_4_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_5 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2500_{{nat_machine_5}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_5_lan3}} snat to {{nat_machine_5_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_6 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2600_{{nat_machine_6}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_6_lan3}} snat to {{nat_machine_6_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_7 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2700_{{nat_machine_7}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_7_lan3}} snat to {{nat_machine_7_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_8 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2800_{{nat_machine_8}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_8_lan3}} snat to {{nat_machine_8_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_9 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"2900_{{nat_machine_9}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_9_lan3}} snat to {{nat_machine_9_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t\r\n                                {% if nat_machine_10 is defined %}\r\n\t\t\t\t\t\t\t\t,\r\n\t\t\t\t\t\t\t\t\"3000_{{nat_machine_10}}\": {\r\n                                    \"contents\": \"ip saddr {{nat_machine_10_lan3}} snat to {{nat_machine_10_lan2}}\"\r\n                                }\r\n\t\t\t\t\t\t\t\t{% endif %}\r\n\r\n                                {% endif %}\r\n\r\n\r\n                            },\r\n                            \"policy\": \"accept\"\r\n                        }\r\n                    }\r\n                },\r\n                \"inet\": {\r\n                    \"filter\": {\r\n                        \"common\": {\r\n                            \"mgmtd\": {\r\n                                \"1200_allow_icmp\": {\r\n                                    \"contents\": \"meta l4proto {icmp, icmpv6} accept\",\r\n                                    \"notes\": \"Allow ICMP everywhere\"\r\n                                }\r\n                            }\r\n                        },\r\n                        \"input\": {\r\n                            \"mgmtd\": {\r\n                                \"1000_allow_local\": {\r\n                                    \"contents\": \"iiftype loopback accept\",\r\n                                    \"notes\": \"Do not remove this rule unless you want to break device.\\n\\nThis rule allows any internal traffic (e.g. 127.0.0.1 for IPv4 and ::1 for\\nIPv6). Because input policy is 'drop' in this preset, without this rule internal\\nservices of EG will stop working.\"\r\n                                },\r\n                                \"1100_allow_ssh\": {\r\n                                    \"contents\": \"tcp dport ssh accept\"\r\n                                },\r\n                                \"1200_allow_https\": {\r\n                                    \"contents\": \"tcp dport https accept\"\r\n                                },\r\n                                \"1300_allow_swupdate\": {\r\n                                    \"contents\": \"tcp dport 8080 accept\"\r\n                                },\r\n                                \"1400_allow_webui\": {\r\n                                    \"contents\": \"tcp dport 48366 accept\"\r\n                                },\r\n                                \"1500_allow_conn_check\": {\r\n                                    \"contents\": \"tcp dport 9090 accept\"\r\n                                },\r\n                                \"1600_allow_all_tun0\": {\r\n                                    \"contents\": \"iifname tun0 accept\"\r\n                                },\r\n                                \"9000_allow_responses\": {\r\n                                    \"contents\": \"ct state {related, established} accept\",\r\n                                    \"notes\": \"Allow incoming traffic created in response to connections originated by EG itself.\"\r\n                                }\r\n                            },\r\n                            \"policy\": \"drop\"\r\n                        },\r\n                        \"output\": {\r\n                            \"mgmtd\": {\r\n                                \"9000_allow_responses\": {\r\n                                    \"notes\": \"Allow outgoing traffic created in response to connections accepted by input\\nchain. This rule is not needed as long as policy of this chain is accept --- it\\nis present here for convenience because continuation of already established\\nconnection is almost always something we want, and it is easy to forget adding\\nsuch rule after changing policy of the chain to `drop`. The name starts with\\n9000_ as it is meant to be executed late in the chain (so earlier explicit drops\\nwill prevent triggering this rule)\",\r\n                                    \"contents\": \"ct state {related, established} accept\"\r\n                                }\r\n                            },\r\n                            \"policy\": \"accept\"\r\n                        },\r\n                        \"forward\": {\r\n                            \"mgmtd\": {\r\n                                \"1000_allow_responses\": {\r\n                                    \"notes\": \"Allow forwarding traffic created in response to connections accepted by other\\nrules. This rule is not needed as long as policy of this chain is accept --- it\\nis present here for convenience because continuation of already established\\nconnection is almost always something we want, and it is easy to forget adding\\nsuch rule after changing policy of the chain to `drop`. The name starts with\\n9000_ as it is meant to be executed late in the chain (so earlier explicit drops\\nwill prevent triggering this rule)\",\r\n                                    \"contents\": \"ct state {related, established} accept\"\r\n                                }\r\n                                 {% if custom_fw_allow_http is defined %}\r\n                                ,\r\n                                \"1100_allow_http\": {\"contents\": \"tcp dport 443 accept\"}\r\n                                {% endif %}\r\n\t\t\t\t\t\t\t\t {% if custom_fw_allow_ftp is defined %}\r\n                                ,\r\n                                \"1200_allow_ftp\": {\"contents\": \"tcp dport 21 accept\"}\r\n                                {% endif %}\r\n\t\t\t\t\t\t\t\t {% if custom_fw_allow_sftp is defined %}\r\n                                ,\r\n                                \"1300_allow_sftp\": {\"contents\": \"tcp dport 22 accept\"}\r\n                                {% endif %}\r\n\t\t\t\t\t\t\t\t {% if custom_fw_allow_opc is defined %}\r\n                                ,\r\n                                \"1400_fw_allow_opcua_4840\": {\"contents\": \"tcp dport 4840 accept\"}\r\n                                {% endif %}\r\n                                ,\r\n                                \"1500_drop_lan3_to_lan2\": {\r\n                                    \"contents\": \"iifname lan3 oifname lan2  drop\"\r\n                                }\r\n                            },\r\n                            \"policy\": \"accept\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    \"ovpn\": {},\r\n    \"docker\": {\r\n        \"dockerdns\": [],\r\n        \"compose_files\": {\r\n            {% if vpn_image is defined %}\r\n            \"vpncontainerclient\": \"version: \\\"2.1\\\"\\n\\nservices:\\n  vpncontainerclient:\\n    image: {{vpn_image}}\\n    container_name: vpncontainerclient\\n    network_mode: host\\n    restart: unless-stopped\\n    environment:\\n      INITIAL_NAME: \\\"{{ serialNumber }}\\\"\\n      VSS_ADDRESS: {{vpn_vss_address}}\\n      VSS_API_USER: {{vpn_vss_api_user}}\\n      VSS_API_KEY: \\\"{{vpn_vss_api_key}}\\\"\\n      VSS_LOG_LEVEL: info\\n      VSS_SEND_LOG_LEVEL: info\\n      VSS_CONTACT_INTERVAL: 300\\n      VSS_SEND_LOGS_INTERVAL: 300\\n      DISABLE_IPTABLES_PURGE: \\\"false\\\"\\n      IPTABLES_MASQ_TYPE: \\\"disabled\\\"\\n    cap_add:\\n      - NET_ADMIN\\n    volumes:\\n      - /proc/sys/net/ipv4/ip_forward:/ip_forward\\n      - \\\"filestorage:/filestorage\\\"\\n    devices:\\n      - /dev/net/tun:/dev/net/tun\\nvolumes:\\n  filestorage:\\n    name: vpncontainerclient-volume-filestorage\"\r\n            {% endif %}\r\n        }\r\n        {% if compose_docker_auth_serveraddress is defined %}\r\n        ,\r\n        \"compose_docker_config\": {\r\n            \"auths\": {\r\n                \"{{compose_docker_auth_serveraddress}}\": {\r\n                    \"auth\": \"{{compose_docker_auth_token}}\"\r\n                }\r\n            }\r\n       }\r\n       {% endif %}\r\n    }\r\n}",
   "deviceType":"10",
   "feature":"1"
}


